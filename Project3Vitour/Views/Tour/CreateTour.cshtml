<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Yeni Tur Oluştur</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet" />

    <style>
        :root {
          --brand:       #1a3c5e;
          --brand-light: #eef3f8;
          --accent:      #e8a045;
          --accent-pale: #fdf3e3;
          --success:     #198754;
          --radius:      14px;
          --sidebar-w:   240px;
        }

        * { box-sizing: border-box; }

        body {
          font-family: 'Plus Jakarta Sans', sans-serif;
          background: #f0f4f8;
          color: #1e2d3d;
          min-height: 100vh;
        }

        /* ── SIDEBAR ── */
        .sidebar {
          position: fixed; top: 0; left: 0;
          width: var(--sidebar-w);
          height: 100vh;
          background: var(--brand);
          display: flex; flex-direction: column;
          z-index: 100;
          box-shadow: 4px 0 24px rgba(0,0,0,.15);
        }
        .sidebar-logo {
          padding: 28px 24px 20px;
          border-bottom: 1px solid rgba(255,255,255,.1);
        }
        .sidebar-logo span {
          font-size: 1.2rem; font-weight: 700; color: #fff; letter-spacing: -.3px;
        }
        .sidebar-logo span em { color: var(--accent); font-style: normal; }
        .sidebar-nav { padding: 16px 12px; flex: 1; overflow-y: auto; }
        .nav-label {
          font-size: .68rem; font-weight: 700; letter-spacing: 1px;
          color: rgba(255,255,255,.4); text-transform: uppercase;
          padding: 8px 12px 6px;
        }
        .nav-link-item {
          display: flex; align-items: center; gap: 10px;
          padding: 10px 14px; border-radius: 10px;
          color: rgba(255,255,255,.7); font-size: .88rem; font-weight: 500;
          text-decoration: none; margin-bottom: 2px;
          transition: background .18s, color .18s;
        }
        .nav-link-item i { font-size: 1rem; }
        .nav-link-item:hover  { background: rgba(255,255,255,.08); color: #fff; }
        .nav-link-item.active { background: rgba(232,160,69,.2); color: var(--accent); }
        .sidebar-footer {
          padding: 16px 20px; border-top: 1px solid rgba(255,255,255,.1);
          color: rgba(255,255,255,.5); font-size: .8rem;
        }

        /* ── MAIN ── */
        .main-wrap {
          margin-left: var(--sidebar-w);
          min-height: 100vh;
          display: flex; flex-direction: column;
        }

        /* ── TOP BAR ── */
        .topbar {
          background: #fff;
          border-bottom: 1px solid #e4ecf4;
          padding: 16px 32px;
          display: flex; align-items: center; justify-content: space-between;
          position: sticky; top: 0; z-index: 90;
        }
        .topbar-title { font-size: 1.05rem; font-weight: 700; color: var(--brand); }
        .topbar-breadcrumb {
          font-size: .78rem; color: #8fa3ba; margin-top: 2px;
        }
        .topbar-breadcrumb span { color: var(--brand); font-weight: 600; }
        .topbar-actions { display: flex; gap: 10px; align-items: center; }
        .avatar {
          width: 36px; height: 36px; border-radius: 50%;
          background: var(--brand-light); color: var(--brand);
          display: flex; align-items: center; justify-content: center;
          font-weight: 700; font-size: .85rem;
        }

        /* ── CONTENT ── */
        .content { padding: 32px; flex: 1; }

        /* ── CARDS ── */
        .card-panel {
          background: #fff;
          border-radius: var(--radius);
          border: 1px solid #e4ecf4;
          overflow: hidden;
          margin-bottom: 20px;
          box-shadow: 0 2px 12px rgba(26,60,94,.06);
        }
        .card-panel-header {
          padding: 18px 24px;
          border-bottom: 1px solid #f0f4f8;
          display: flex; align-items: center; gap: 12px;
        }
        .card-panel-icon {
          width: 36px; height: 36px; border-radius: 10px;
          background: var(--brand-light);
          display: flex; align-items: center; justify-content: center;
          color: var(--brand); font-size: 1rem;
        }
        .card-panel-title { font-weight: 700; font-size: .95rem; color: var(--brand); }
        .card-panel-sub   { font-size: .78rem; color: #8fa3ba; margin-top: 1px; }
        .card-panel-body  { padding: 24px; }

        /* ── FORM CONTROLS ── */
        .form-label {
          font-size: .8rem; font-weight: 600; color: #475f74;
          margin-bottom: 6px; letter-spacing: .2px;
        }
        .form-label .req { color: #e05c5c; margin-left: 2px; }
        .form-control, .form-select {
          border: 1.5px solid #dce8f0;
          border-radius: 10px;
          padding: 10px 14px;
          font-family: 'Plus Jakarta Sans', sans-serif;
          font-size: .88rem;
          color: #1e2d3d;
          background: #fbfcfe;
          transition: border-color .2s, box-shadow .2s;
        }
        .form-control:focus, .form-select:focus {
          border-color: var(--brand);
          box-shadow: 0 0 0 3px rgba(26,60,94,.1);
          background: #fff;
          outline: none;
        }
        .form-control.is-invalid { border-color: #e05c5c; }
        .form-control::placeholder { color: #b0c2d0; }
        textarea.form-control { resize: vertical; min-height: 110px; }

        /* ── INPUT WITH ICON ── */
        .input-icon-wrap { position: relative; }
        .input-icon-wrap .form-control { padding-left: 40px; }
        .input-icon-wrap .bi {
          position: absolute; left: 13px; top: 50%; transform: translateY(-50%);
          color: #9fb5c8; font-size: 1rem; pointer-events: none;
        }

        /* ── NUMBER SPINNERS ── */
        .spinner-group {
          display: flex; align-items: center;
          border: 1.5px solid #dce8f0; border-radius: 10px;
          overflow: hidden; background: #fbfcfe;
        }
        .spinner-btn {
          width: 42px; height: 42px; border: none;
          background: var(--brand-light); color: var(--brand);
          font-size: 1.1rem; font-weight: 700; cursor: pointer;
          display: flex; align-items: center; justify-content: center;
          transition: background .15s;
          flex-shrink: 0;
        }
        .spinner-btn:hover { background: #d6e5f3; }
        .spinner-input {
          flex: 1; border: none; text-align: center;
          font-family: 'Plus Jakarta Sans', sans-serif;
          font-size: .95rem; font-weight: 600; color: var(--brand);
          background: transparent; outline: none;
        }

        /* ── PRICE INPUT ── */
        .price-wrap { position: relative; }
        .price-wrap .currency {
          position: absolute; left: 14px; top: 50%; transform: translateY(-50%);
          font-weight: 700; color: var(--brand); font-size: .95rem;
        }
        .price-wrap .form-control { padding-left: 30px; font-weight: 600; font-size: .95rem; }

        /* ── IMAGE UPLOAD ── */
        .upload-zone {
          border: 2px dashed #c8d9e9;
          border-radius: 12px;
          padding: 32px 20px;
          text-align: center;
          cursor: pointer;
          transition: border-color .2s, background .2s;
          background: #f8fbfe;
          position: relative;
        }
        .upload-zone:hover { border-color: var(--brand); background: var(--brand-light); }
        .upload-zone input[type=file] {
          position: absolute; inset: 0; opacity: 0; cursor: pointer;
        }
        .upload-icon {
          width: 56px; height: 56px; border-radius: 14px;
          background: var(--brand-light); color: var(--brand);
          display: flex; align-items: center; justify-content: center;
          font-size: 1.5rem; margin: 0 auto 12px;
        }
        .upload-zone p { font-size: .85rem; color: #8fa3ba; margin: 0; }
        .upload-zone strong { display: block; font-size: .9rem; color: var(--brand); margin-bottom: 4px; }

        /* URL preview */
        #urlPreview {
          display: none; margin-top: 14px;
          border-radius: 10px; overflow: hidden;
          border: 1.5px solid #dce8f0; position: relative;
        }
        #urlPreview img { width: 100%; max-height: 200px; object-fit: cover; display: block; }
        #removeImg {
          position: absolute; top: 8px; right: 8px;
          background: rgba(0,0,0,.55); border: none;
          color: #fff; border-radius: 6px; width: 28px; height: 28px;
          display: flex; align-items: center; justify-content: center;
          cursor: pointer; font-size: .85rem;
        }

        /* ── BADGE CHIPS ── */
        .badge-options { display: flex; flex-wrap: wrap; gap: 8px; }
        .badge-chip {
          padding: 6px 16px; border-radius: 20px; font-size: .8rem; font-weight: 600;
          border: 1.5px solid #dce8f0; cursor: pointer;
          background: #f8fbfe; color: #475f74;
          transition: all .18s; user-select: none;
        }
        .badge-chip:hover  { border-color: var(--brand); color: var(--brand); }
        .badge-chip.active { background: var(--brand); border-color: var(--brand); color: #fff; }
        .badge-chip.accent.active { background: var(--accent); border-color: var(--accent); color: #fff; }
        .badge-chip.green.active  { background: #198754; border-color: #198754; color: #fff; }

        /* ── STATUS TOGGLE ── */
        .toggle-wrap {
          display: flex; align-items: center; justify-content: space-between;
          padding: 16px 20px; border-radius: 12px;
          border: 1.5px solid #dce8f0; background: #fbfcfe;
        }
        .toggle-label { font-size: .88rem; font-weight: 600; color: #475f74; }
        .toggle-sub   { font-size: .75rem; color: #9fb5c8; margin-top: 2px; }
        .form-switch .form-check-input {
          width: 48px; height: 26px; cursor: pointer;
          background-color: #c8d9e9;
        }
        .form-switch .form-check-input:checked { background-color: var(--success); border-color: var(--success); }
        .form-switch .form-check-input:focus { box-shadow: none; }

        /* ── SUMMARY CARD ── */
        .summary-card {
          background: linear-gradient(135deg, var(--brand) 0%, #0f2540 100%);
          border-radius: var(--radius); color: #fff; padding: 24px;
          margin-bottom: 20px; position: sticky; top: 80px;
        }
        .summary-card h6 { font-size: .78rem; letter-spacing: 1px; text-transform: uppercase; color: rgba(255,255,255,.5); margin-bottom: 16px; }
        .summary-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .summary-row .lbl { font-size: .82rem; color: rgba(255,255,255,.6); }
        .summary-row .val { font-size: .88rem; font-weight: 600; color: #fff; }
        .summary-divider { border-top: 1px solid rgba(255,255,255,.12); margin: 14px 0; }
        .summary-price { font-size: 1.6rem; font-weight: 700; color: var(--accent); }

        .preview-img-wrap {
          border-radius: 10px; overflow: hidden; margin-bottom: 16px;
          height: 130px; background: rgba(255,255,255,.08);
          display: flex; align-items: center; justify-content: center;
        }
        .preview-img-wrap img { width: 100%; height: 100%; object-fit: cover; }
        .preview-img-wrap span { color: rgba(255,255,255,.3); font-size: .82rem; }

        /* ── BUTTONS ── */
        .btn-brand {
          background: var(--brand); color: #fff; border: none;
          border-radius: 10px; padding: 12px 28px;
          font-family: 'Plus Jakarta Sans', sans-serif;
          font-weight: 700; font-size: .9rem; cursor: pointer;
          transition: background .18s, transform .12s;
          display: inline-flex; align-items: center; gap: 8px;
        }
        .btn-brand:hover { background: #152f4a; transform: translateY(-1px); }

        .btn-accent {
          background: var(--accent); color: #fff; border: none;
          border-radius: 10px; padding: 12px 28px;
          font-family: 'Plus Jakarta Sans', sans-serif;
          font-weight: 700; font-size: .9rem; cursor: pointer;
          transition: background .18s, transform .12s;
          display: inline-flex; align-items: center; gap: 8px;
        }
        .btn-accent:hover { background: #cf8d30; transform: translateY(-1px); }

        .btn-outline-brand {
          background: transparent; color: var(--brand);
          border: 1.5px solid #c8d9e9;
          border-radius: 10px; padding: 11px 20px;
          font-family: 'Plus Jakarta Sans', sans-serif;
          font-weight: 600; font-size: .88rem; cursor: pointer;
          transition: all .18s;
          display: inline-flex; align-items: center; gap: 8px;
        }
        .btn-outline-brand:hover { background: var(--brand-light); border-color: var(--brand); }

        /* ── STEP INDICATOR ── */
        .step-indicator {
          display: flex; gap: 0; margin-bottom: 28px;
          background: #fff; border-radius: var(--radius);
          border: 1px solid #e4ecf4; overflow: hidden;
          box-shadow: 0 2px 8px rgba(26,60,94,.05);
        }
        .step-item {
          flex: 1; padding: 14px 16px;
          display: flex; align-items: center; gap: 10px;
          border-right: 1px solid #e4ecf4; position: relative;
        }
        .step-item:last-child { border-right: none; }
        .step-num {
          width: 28px; height: 28px; border-radius: 50%;
          display: flex; align-items: center; justify-content: center;
          font-size: .78rem; font-weight: 700; flex-shrink: 0;
          background: #e4ecf4; color: #8fa3ba;
        }
        .step-item.done .step-num  { background: var(--success); color: #fff; }
        .step-item.active .step-num { background: var(--brand); color: #fff; }
        .step-item.active::after {
          content: ''; position: absolute; bottom: 0; left: 0; right: 0; height: 3px;
          background: var(--brand);
        }
        .step-text { font-size: .8rem; font-weight: 600; color: #8fa3ba; }
        .step-item.active .step-text { color: var(--brand); }
        .step-item.done  .step-text  { color: var(--success); }

        /* ── HELPER TEXT ── */
        .form-hint { font-size: .75rem; color: #9fb5c8; margin-top: 5px; }

        /* ── CHAR COUNTER ── */
        .char-counter { font-size: .72rem; color: #b0c2d0; text-align: right; margin-top: 4px; }

        @@media (max-width: 992px) {
          .sidebar { display: none; }
          .main-wrap { margin-left: 0; }
          .content { padding: 20px; }
        }
        @@media (max-width: 576px) {
          .topbar { padding: 12px 16px; }
          .content { padding: 12px; }
        }
    </style>
</head>
<body>

    <!-- ── SIDEBAR ── -->
    <aside class="sidebar">
        <div class="sidebar-logo">
            <span>Tur<em>Panel</em></span>
        </div>
        <nav class="sidebar-nav">
            <div class="nav-label">Genel</div>
            <a class="nav-link-item" href="#"><i class="bi bi-grid-1x2"></i> Dashboard</a>
            <a class="nav-link-item active" href="#"><i class="bi bi-map"></i> Turlar</a>
            <a class="nav-link-item" href="#"><i class="bi bi-people"></i> Müşteriler</a>
            <a class="nav-link-item" href="#"><i class="bi bi-calendar3"></i> Rezervasyonlar</a>
            <div class="nav-label mt-2">Yönetim</div>
            <a class="nav-link-item" href="#"><i class="bi bi-bar-chart"></i> Raporlar</a>
            <a class="nav-link-item" href="#"><i class="bi bi-gear"></i> Ayarlar</a>
        </nav>
        <div class="sidebar-footer">
            <i class="bi bi-shield-check me-1"></i> v2.4.1 &mdash; TurPanel
        </div>
    </aside>

    <!-- ── MAIN ── -->
    <div class="main-wrap">

        <!-- TOP BAR -->
        <header class="topbar">
            <div>
                <div class="topbar-title">Yeni Tur Oluştur</div>
                <div class="topbar-breadcrumb">Turlar &rsaquo; <span>Yeni Tur</span></div>
            </div>
            <div class="topbar-actions">
                <button class="btn-outline-brand"><i class="bi bi-eye"></i> Önizle</button>
                <div class="avatar">AY</div>
            </div>
        </header>

        <!-- CONTENT -->
        <main class="content">

            <!-- STEP INDICATOR -->
            <div class="step-indicator">
                <div class="step-item done">
                    <div class="step-num"><i class="bi bi-check"></i></div>
                    <div class="step-text">Temel Bilgiler</div>
                </div>
                <div class="step-item active">
                    <div class="step-num">2</div>
                    <div class="step-text">Detaylar & Fiyat</div>
                </div>
                <div class="step-item">
                    <div class="step-num">3</div>
                    <div class="step-text">Medya</div>
                </div>
                <div class="step-item">
                    <div class="step-num">4</div>
                    <div class="step-text">Yayın</div>
                </div>
            </div>

            <div class="row g-4">

                <!-- ── LEFT COLUMN ── -->
                <div class="col-lg-8">

                    <!-- 1. Temel Bilgiler -->
                    <div class="card-panel">
                        <div class="card-panel-header">
                            <div class="card-panel-icon"><i class="bi bi-pencil-square"></i></div>
                            <div>
                                <div class="card-panel-title">Temel Bilgiler</div>
                                <div class="card-panel-sub">Tur başlığı ve açıklamasını girin</div>
                            </div>
                        </div>
                        <div class="card-panel-body">
                            <div class="mb-4">
                                <label class="form-label">Tur Başlığı <span class="req">*</span></label>
                                <div class="input-icon-wrap">
                                    <i class="bi bi-type-h1"></i>
                                    <input type="text" class="form-control" id="titleInput"
                                           placeholder="Örn: 5 Gün Kapadokya & Göreme Turu"
                                           oninput="updateSummary()">
                                </div>
                                <div class="char-counter"><span id="titleCount">0</span> / 120 karakter</div>
                            </div>
                            <div class="mb-0">
                                <label class="form-label">Tur Açıklaması <span class="req">*</span></label>
                                <textarea class="form-control" id="descInput" rows="5"
                                          placeholder="Tur rotası, konaklama, ulaşım ve dahil olan aktiviteler hakkında detaylı bilgi verin..."
                                          oninput="updateCharCount()"></textarea>
                                <div class="char-counter"><span id="descCount">0</span> / 1000 karakter</div>
                                <p class="form-hint"><i class="bi bi-info-circle me-1"></i>En az 80 karakter önerilir.</p>
                            </div>
                        </div>
                    </div>

                    <!-- 2. Tur Detayları -->
                    <div class="card-panel">
                        <div class="card-panel-header">
                            <div class="card-panel-icon"><i class="bi bi-sliders"></i></div>
                            <div>
                                <div class="card-panel-title">Tur Detayları</div>
                                <div class="card-panel-sub">Süre, kapasite ve fiyat bilgilerini belirleyin</div>
                            </div>
                        </div>
                        <div class="card-panel-body">
                            <div class="row g-4">

                                <!-- Gün Sayısı -->
                                <div class="col-sm-4">
                                    <label class="form-label">Tur Süresi (Gün) <span class="req">*</span></label>
                                    <div class="spinner-group">
                                        <button class="spinner-btn" type="button" onclick="spin('dayCount', -1)">&#8722;</button>
                                        <input class="spinner-input" type="number" id="dayCount" value="5" min="1" max="365" oninput="updateSummary()">
                                        <button class="spinner-btn" type="button" onclick="spin('dayCount', 1)">&#43;</button>
                                    </div>
                                    <p class="form-hint">1 – 365 gün arası</p>
                                </div>

                                <!-- Kapasite -->
                                <div class="col-sm-4">
                                    <label class="form-label">Maksimum Kapasite <span class="req">*</span></label>
                                    <div class="spinner-group">
                                        <button class="spinner-btn" type="button" onclick="spin('capacity', -1)">&#8722;</button>
                                        <input class="spinner-input" type="number" id="capacity" value="20" min="1" max="500" oninput="updateSummary()">
                                        <button class="spinner-btn" type="button" onclick="spin('capacity', 1)">&#43;</button>
                                    </div>
                                    <p class="form-hint">1 – 500 kişi arası</p>
                                </div>

                                <!-- Fiyat -->
                                <div class="col-sm-4">
                                    <label class="form-label">Kişi Başı Fiyat (₺) <span class="req">*</span></label>
                                    <div class="price-wrap">
                                        <span class="currency">₺</span>
                                        <input type="number" class="form-control" id="priceInput"
                                               placeholder="0.00" min="0" step="0.01"
                                               oninput="updateSummary()">
                                    </div>
                                    <p class="form-hint">KDV dahil fiyat giriniz</p>
                                </div>

                            </div>
                        </div>
                    </div>

                    <!-- 3. Kapak Görseli -->
                    <div class="card-panel">
                        <div class="card-panel-header">
                            <div class="card-panel-icon"><i class="bi bi-image"></i></div>
                            <div>
                                <div class="card-panel-title">Kapak Görseli</div>
                                <div class="card-panel-sub">URL girin veya dosya yükleyin</div>
                            </div>
                        </div>
                        <div class="card-panel-body">

                            <!-- Tab: URL -->
                            <div class="mb-3">
                                <label class="form-label">Görsel URL'si</label>
                                <div class="input-icon-wrap">
                                    <i class="bi bi-link-45deg"></i>
                                    <input type="url" class="form-control" id="coverImageUrl"
                                           placeholder="https://example.com/gorsel.jpg"
                                           oninput="previewImage()">
                                </div>
                            </div>

                            <!-- Preview -->
                            <div id="urlPreview">
                                <img id="previewImg" src="" alt="Ön izleme">
                                <button id="removeImg" type="button" onclick="removeImage()" title="Kaldır">
                                    <i class="bi bi-x"></i>
                                </button>
                            </div>

                            <div class="d-flex align-items-center gap-3 my-3">
                                <hr class="flex-grow-1 m-0">
                                <span style="font-size:.75rem;color:#9fb5c8;white-space:nowrap">veya dosya yükle</span>
                                <hr class="flex-grow-1 m-0">
                            </div>

                            <!-- Upload -->
                            <div class="upload-zone">
                                <input type="file" accept="image/*" onchange="handleFileUpload(event)">
                                <div class="upload-icon"><i class="bi bi-cloud-arrow-up"></i></div>
                                <strong>Görsel Seçin veya Sürükleyin</strong>
                                <p>PNG, JPG, WEBP — Maks. 5 MB</p>
                            </div>

                        </div>
                    </div>

                    <!-- 4. Rozet & Durum -->
                    <div class="card-panel">
                        <div class="card-panel-header">
                            <div class="card-panel-icon"><i class="bi bi-tags"></i></div>
                            <div>
                                <div class="card-panel-title">Rozet & Yayın Durumu</div>
                                <div class="card-panel-sub">Turun etiketini ve görünürlüğünü belirleyin</div>
                            </div>
                        </div>
                        <div class="card-panel-body">

                            <label class="form-label mb-2">Rozet Seçin</label>
                            <input type="hidden" id="badgeValue" value="">
                            <div class="badge-options mb-4" id="badgeOptions">
                                <span class="badge-chip active" data-badge="Öne Çıkan" onclick="selectBadge(this)">🌟 Öne Çıkan</span>
                                <span class="badge-chip accent" data-badge="Fırsat" onclick="selectBadge(this)">🔥 Fırsat</span>
                                <span class="badge-chip green" data-badge="Yeni" onclick="selectBadge(this)">✨ Yeni</span>
                                <span class="badge-chip" data-badge="Çok Satan" onclick="selectBadge(this)">🏆 Çok Satan</span>
                                <span class="badge-chip" data-badge="Son Kontenjan" onclick="selectBadge(this)">⏳ Son Kontenjan</span>
                                <span class="badge-chip" data-badge="" onclick="selectBadge(this)">🚫 Rozet Yok</span>
                            </div>

                            <label class="form-label mb-2">Yayın Durumu</label>
                            <div class="toggle-wrap">
                                <div>
                                    <div class="toggle-label">Tur Yayında</div>
                                    <div class="toggle-sub" id="statusSub">Tur şu an aktif ve listelenebilir durumda</div>
                                </div>
                                <div class="form-check form-switch mb-0">
                                    <input class="form-check-input" type="checkbox" id="isStatus" checked
                                           onchange="updateStatusLabel()">
                                </div>
                            </div>

                        </div>
                    </div>

                    <!-- SUBMIT BUTTONS -->
                    <div class="d-flex gap-3 flex-wrap">
                        <button class="btn-accent" type="button" onclick="submitForm()">
                            <i class="bi bi-check-circle"></i> Turu Oluştur
                        </button>
                        <button class="btn-brand" type="button">
                            <i class="bi bi-floppy"></i> Taslak Kaydet
                        </button>
                        <button class="btn-outline-brand" type="button">
                            <i class="bi bi-arrow-left"></i> İptal
                        </button>
                    </div>

                </div><!-- /col-lg-8 -->
                <!-- ── RIGHT COLUMN: SUMMARY ── -->
                <div class="col-lg-4">

                    <!-- Özet Kartı -->
                    <div class="summary-card">
                        <h6>Tur Özeti</h6>

                        <div class="preview-img-wrap" id="summaryImgWrap">
                            <span id="summaryImgPlaceholder"><i class="bi bi-image" style="font-size:1.4rem;display:block;margin-bottom:4px"></i>Kapak görseli</span>
                            <img id="summaryImg" src="" alt="" style="display:none">
                        </div>

                        <div class="summary-row">
                            <span class="lbl">Başlık</span>
                            <span class="val" id="sumTitle" style="max-width:55%;text-align:right;font-size:.8rem">—</span>
                        </div>
                        <div class="summary-row">
                            <span class="lbl">Süre</span>
                            <span class="val" id="sumDay">5 Gün</span>
                        </div>
                        <div class="summary-row">
                            <span class="lbl">Kapasite</span>
                            <span class="val" id="sumCapacity">20 Kişi</span>
                        </div>
                        <div class="summary-row">
                            <span class="lbl">Rozet</span>
                            <span class="val" id="sumBadge">🌟 Öne Çıkan</span>
                        </div>
                        <div class="summary-row">
                            <span class="lbl">Durum</span>
                            <span class="val" id="sumStatus" style="color:#4ade80">● Yayında</span>
                        </div>
                        <div class="summary-divider"></div>
                        <div class="summary-row">
                            <span class="lbl" style="font-size:.9rem">Kişi Başı Fiyat</span>
                            <span class="summary-price" id="sumPrice">—</span>
                        </div>
                    </div>

                    <!-- İpuçları -->
                    <div class="card-panel">
                        <div class="card-panel-header">
                            <div class="card-panel-icon" style="background:#fdf3e3;color:var(--accent)"><i class="bi bi-lightbulb"></i></div>
                            <div>
                                <div class="card-panel-title">İpuçları</div>
                            </div>
                        </div>
                        <div class="card-panel-body pt-2">
                            <ul class="mb-0" style="padding-left:18px;font-size:.82rem;color:#475f74;line-height:1.8">
                                <li>Başlık en az <strong>20 karakter</strong> olmalıdır.</li>
                                <li>Kapak görseli <strong>16:9 oran</strong>ında olmalıdır.</li>
                                <li>Açıklama SEO için önemlidir, detaylı yazın.</li>
                                <li>Fiyatı KDV dahil, <strong>₺ cinsinden</strong> girin.</li>
                                <li>Yayınlamadan önce önizleme yapın.</li>
                            </ul>
                        </div>
                    </div>

                    <!-- Zorunlu Alan Durumu -->
                    <div class="card-panel">
                        <div class="card-panel-header">
                            <div class="card-panel-icon" style="background:#edfbf1;color:#198754"><i class="bi bi-check2-all"></i></div>
                            <div>
                                <div class="card-panel-title">Zorunlu Alanlar</div>
                            </div>
                        </div>
                        <div class="card-panel-body pt-2">
                            <div id="fieldChecks" style="font-size:.82rem;display:flex;flex-direction:column;gap:6px"></div>
                        </div>
                    </div>

                </div><!-- /col-lg-4 -->

            </div><!-- /row -->
        </main>
    </div><!-- /main-wrap -->
    <!-- SUCCESS TOAST -->
    <div id="toast" style="
  position:fixed;bottom:28px;right:28px;z-index:9999;
  background:#1a3c5e;color:#fff;padding:14px 22px;border-radius:12px;
  display:none;align-items:center;gap:10px;
  box-shadow:0 8px 32px rgba(0,0,0,.2);font-size:.88rem;font-weight:600;
  animation: slideUp .3s ease;">
        <i class="bi bi-check-circle-fill" style="color:#4ade80;font-size:1.1rem"></i>
        <span id="toastMsg">İşlem başarılı!</span>
    </div>

    <style>
        @@keyframes slideUp { from { transform: translateY(20px); opacity:0; } to { transform: translateY(0); opacity:1; } }
    </style>

    <script>
        // ── Spinner ──
        function spin(id, delta) {
          const el = document.getElementById(id);
          const min = parseInt(el.min) || 1;
          const max = parseInt(el.max) || 9999;
          el.value = Math.min(max, Math.max(min, parseInt(el.value || 0) + delta));
          updateSummary();
        }

        // ── Char counters ──
        document.getElementById('titleInput').addEventListener('input', function () {
          document.getElementById('titleCount').textContent = this.value.length;
          updateSummary();
        });
        function updateCharCount() {
          const v = document.getElementById('descInput').value.length;
          document.getElementById('descCount').textContent = v;
        }

        // ── Image preview ──
        function previewImage() {
          const url = document.getElementById('coverImageUrl').value.trim();
          const wrap = document.getElementById('urlPreview');
          const img  = document.getElementById('previewImg');
          if (url) {
            img.src = url;
            wrap.style.display = 'block';
            updateSummaryImage(url);
          } else {
            wrap.style.display = 'none';
            updateSummaryImage('');
          }
        }
        function removeImage() {
          document.getElementById('coverImageUrl').value = '';
          document.getElementById('urlPreview').style.display = 'none';
          updateSummaryImage('');
        }
        function handleFileUpload(e) {
          const file = e.target.files[0];
          if (!file) return;
          const reader = new FileReader();
          reader.onload = ev => {
            const wrap = document.getElementById('urlPreview');
            document.getElementById('previewImg').src = ev.target.result;
            wrap.style.display = 'block';
            updateSummaryImage(ev.target.result);
          };
          reader.readAsDataURL(file);
        }
        function updateSummaryImage(src) {
          const si = document.getElementById('summaryImg');
          const ph = document.getElementById('summaryImgPlaceholder');
          if (src) { si.src = src; si.style.display = 'block'; ph.style.display = 'none'; }
          else      { si.style.display = 'none'; ph.style.display = 'block'; }
        }

        // ── Badge select ──
        document.getElementById('badgeOptions').querySelectorAll('.badge-chip')[0].classList.add('active');
        document.getElementById('badgeValue').value = 'Öne Çıkan';

        function selectBadge(el) {
          document.querySelectorAll('.badge-chip').forEach(c => c.classList.remove('active'));
          el.classList.add('active');
          document.getElementById('badgeValue').value = el.dataset.badge;
          updateSummary();
        }

        // ── Status ──
        function updateStatusLabel() {
          const on = document.getElementById('isStatus').checked;
          document.getElementById('statusSub').textContent = on
            ? 'Tur şu an aktif ve listelenebilir durumda'
            : 'Tur pasif – kullanıcılara görünmez';
          document.getElementById('sumStatus').textContent = on ? '● Yayında' : '○ Pasif';
          document.getElementById('sumStatus').style.color  = on ? '#4ade80' : '#f87171';
          updateFieldChecks();
        }

        // ── Summary update ──
        function updateSummary() {
          const title    = document.getElementById('titleInput').value || '—';
          const day      = document.getElementById('dayCount').value || 0;
          const capacity = document.getElementById('capacity').value || 0;
          const price    = parseFloat(document.getElementById('priceInput').value);
          const badge    = document.getElementById('badgeValue').value;

          document.getElementById('sumTitle').textContent    = title.length > 28 ? title.slice(0, 28) + '…' : title;
          document.getElementById('sumDay').textContent      = day + ' Gün';
          document.getElementById('sumCapacity').textContent = capacity + ' Kişi';
          document.getElementById('sumBadge').textContent    = badge || 'Yok';
          document.getElementById('sumPrice').textContent    = isNaN(price) ? '—' : price.toLocaleString('tr-TR', { style:'currency', currency:'TRY' });
          updateFieldChecks();
        }

        // ── Field checks ──
        function updateFieldChecks() {
          const fields = [
            { label:'Başlık',       ok: document.getElementById('titleInput').value.length > 3 },
            { label:'Açıklama',     ok: document.getElementById('descInput').value.length > 10 },
            { label:'Kapak Görseli',ok: document.getElementById('coverImageUrl').value.length > 5 || document.getElementById('previewImg').src.startsWith('data') },
            { label:'Gün Sayısı',   ok: parseInt(document.getElementById('dayCount').value) > 0 },
            { label:'Kapasite',     ok: parseInt(document.getElementById('capacity').value) > 0 },
            { label:'Fiyat',        ok: parseFloat(document.getElementById('priceInput').value) > 0 },
          ];
          const wrap = document.getElementById('fieldChecks');
          wrap.innerHTML = fields.map(f => `
            <div style="display:flex;align-items:center;gap:8px;color:${f.ok ? '#198754' : '#8fa3ba'}">
              <i class="bi ${f.ok ? 'bi-check-circle-fill' : 'bi-circle'}" style="font-size:.95rem"></i>
              ${f.label}
            </div>`).join('');
        }

        // ── Submit ──
        function submitForm() {
          const dto = {
            title:         document.getElementById('titleInput').value,
            description:   document.getElementById('descInput').value,
            coverImageUrl: document.getElementById('coverImageUrl').value,
            badge:         document.getElementById('badgeValue').value,
            dayCount:      parseInt(document.getElementById('dayCount').value),
            capacity:      parseInt(document.getElementById('capacity').value),
            price:         parseFloat(document.getElementById('priceInput').value),
            isStatus:      document.getElementById('isStatus').checked,
          };

          if (!dto.title || !dto.description || dto.price <= 0) {
            showToast('⚠️ Lütfen zorunlu alanları doldurun.');
            return;
          }
          console.log('CreateTourDto →', dto);
          showToast('✅ Tur başarıyla oluşturuldu!');
        }

        function showToast(msg) {
          const t = document.getElementById('toast');
          document.getElementById('toastMsg').textContent = msg;
          t.style.display = 'flex';
          setTimeout(() => { t.style.display = 'none'; }, 3500);
        }

        // Init
        updateSummary();
        updateFieldChecks();
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
